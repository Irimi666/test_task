<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="definitions_16dfc5a7-b860-4de1-8e14-e8c86332278a" targetNamespace="http://www.omg.org/spec/BPMN/20100524/MODEL">
  <process id="Process_AI_Generated" name="AI Generated Process" isExecutable="true">
    <laneSet id="LaneSet_0ln5h74">
      <lane id="Lane_0nodxxc" name="Система маркетплейса">
        <flowNodeRef>n4</flowNodeRef>
        <flowNodeRef>n11</flowNodeRef>
        <flowNodeRef>n5</flowNodeRef>
        <flowNodeRef>n6</flowNodeRef>
        <flowNodeRef>n1</flowNodeRef>
        <flowNodeRef>n7</flowNodeRef>
        <flowNodeRef>n3</flowNodeRef>
        <flowNodeRef>Gateway_1dp6w6z</flowNodeRef>
        <flowNodeRef>n10</flowNodeRef>
        <flowNodeRef>Event_1y1icc1</flowNodeRef>
      </lane>
    </laneSet>
    <sequenceFlow id="f3" sourceRef="n3" targetRef="n4" />
    <sequenceFlow id="f4" sourceRef="n4" targetRef="n5" />
    <sequenceFlow id="f5" sourceRef="n4" targetRef="n11" />
    <sequenceFlow id="f6" sourceRef="n5" targetRef="n6" />
    <sequenceFlow id="f7" sourceRef="n6" targetRef="n7" />
    <sequenceFlow id="Flow_1hdx1vd" sourceRef="n1" targetRef="n3" />
    <exclusiveGateway id="n4" name="Проверить необходимость отправки уведомления">
      <incoming>f3</incoming>
      <outgoing>f4</outgoing>
      <outgoing>f5</outgoing>
    </exclusiveGateway>
    <endEvent id="n11" name="Нет необходимости отправлять уведомление">
      <incoming>f5</incoming>
    </endEvent>
    <task id="n5" name="Найти токен устройства пользователя">
      <incoming>f4</incoming>
      <outgoing>f6</outgoing>
    </task>
    <task id="n6" name="Сформировать текст пуш-уведомления">
      <incoming>f6</incoming>
      <outgoing>f7</outgoing>
    </task>
    <startEvent id="n1" name="Изменение статуса заказа">
      <outgoing>Flow_1hdx1vd</outgoing>
    </startEvent>
    <serviceTask id="n7" name="Отправить запрос в сервис пуш-уведомлений">
      <incoming>f7</incoming>
      <outgoing>Flow_0dst263</outgoing>
    </serviceTask>
    <receiveTask id="n3" name="Получить сообщение об изменении статуса">
      <incoming>Flow_1hdx1vd</incoming>
      <outgoing>f3</outgoing>
    </receiveTask>
    <exclusiveGateway id="Gateway_1dp6w6z" name="Уведомление доставлено?">
      <incoming>Flow_0dst263</incoming>
      <outgoing>Flow_01g9ayk</outgoing>
      <outgoing>Flow_0pg3a2h</outgoing>
    </exclusiveGateway>
    <sequenceFlow id="Flow_0dst263" sourceRef="n7" targetRef="Gateway_1dp6w6z" />
    <sequenceFlow id="Flow_01g9ayk" name="Да" sourceRef="Gateway_1dp6w6z" targetRef="n10" />
    <endEvent id="n10" name="Получение устройством пуш-уведомления">
      <incoming>Flow_01g9ayk</incoming>
    </endEvent>
    <endEvent id="Event_1y1icc1" name="Уведомление не доставлено">
      <incoming>Flow_0pg3a2h</incoming>
    </endEvent>
    <sequenceFlow id="Flow_0pg3a2h" name="Нет" sourceRef="Gateway_1dp6w6z" targetRef="Event_1y1icc1" />
  </process>
  <collaboration id="Collab_1">
    <participant id="Participant_1" name="Отправка уведомлений о доставке" processRef="Process_AI_Generated" />
  </collaboration>
  <bpmndi:BPMNDiagram id="BPMNDiagram_Collab_1">
    <bpmndi:BPMNPlane id="BPMNPlane_Collab_1" bpmnElement="Collab_1">
      <bpmndi:BPMNShape id="Participant_1_di" bpmnElement="Participant_1" isHorizontal="true">
        <dc:Bounds x="0" y="-10" width="1280" height="380" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_0nodxxc_di" bpmnElement="Lane_0nodxxc" isHorizontal="true">
        <dc:Bounds x="30" y="-10" width="1250" height="380" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="n4_di" bpmnElement="n4" isMarkerVisible="true">
        <dc:Bounds x="405" y="115" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="390" y="51.5" width="79" height="53" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="n11_di" bpmnElement="n11">
        <dc:Bounds x="512" y="262" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="491" y="298" width="79" height="53" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0fyn9b6_di" bpmnElement="n5">
        <dc:Bounds x="530" y="100" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1fvytj1_di" bpmnElement="n6">
        <dc:Bounds x="690" y="100" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="n1_di" bpmnElement="n1">
        <dc:Bounds x="142" y="122" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="122" y="158" width="76" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_19u78sl_di" bpmnElement="n7">
        <dc:Bounds x="840" y="100" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_13fx7h5_di" bpmnElement="n3">
        <dc:Bounds x="240" y="100" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1dp6w6z_di" bpmnElement="Gateway_1dp6w6z" isMarkerVisible="true">
        <dc:Bounds x="1035" y="115" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1095" y="130" width="69" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="n10_di" bpmnElement="n10">
        <dc:Bounds x="1182" y="222" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1166" y="258" width="68" height="53" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1y1icc1_di" bpmnElement="Event_1y1icc1">
        <dc:Bounds x="1182" y="32" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1158" y="75" width="84" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="f3_di" bpmnElement="f3">
        <di:waypoint x="340" y="140" />
        <di:waypoint x="405" y="140" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="f4_di" bpmnElement="f4">
        <di:waypoint x="455" y="140" />
        <di:waypoint x="530" y="140" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="f5_di" bpmnElement="f5">
        <di:waypoint x="430" y="165" />
        <di:waypoint x="430" y="280" />
        <di:waypoint x="512" y="280" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="f6_di" bpmnElement="f6">
        <di:waypoint x="630" y="140" />
        <di:waypoint x="690" y="140" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="f7_di" bpmnElement="f7">
        <di:waypoint x="790" y="140" />
        <di:waypoint x="840" y="140" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1hdx1vd_di" bpmnElement="Flow_1hdx1vd">
        <di:waypoint x="178" y="140" />
        <di:waypoint x="240" y="140" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0dst263_di" bpmnElement="Flow_0dst263">
        <di:waypoint x="940" y="140" />
        <di:waypoint x="1035" y="140" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_01g9ayk_di" bpmnElement="Flow_01g9ayk">
        <di:waypoint x="1060" y="165" />
        <di:waypoint x="1060" y="240" />
        <di:waypoint x="1182" y="240" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1068" y="193" width="14" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0pg3a2h_di" bpmnElement="Flow_0pg3a2h">
        <di:waypoint x="1060" y="115" />
        <di:waypoint x="1060" y="50" />
        <di:waypoint x="1182" y="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1065" y="80" width="20" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>
