# Требования 

## Описание системы

Система должна получать данные об изменении статуса из API внешнего сервиса и отправлять пуш-уведомления в мобильное приложение пользвователя об изменении статуса заказа.

## Бизнес-процесс

1. Внешний сервис изменяет статус заказа (например, с "заказ прошел сортировку" на "передан службе доставки")

2. Маркетплейс получает уведомление об изменении статуса

    * Через вебхук
    * Опросом API (каждые 5 минут)

3. Система маркетплейса:

    * Проверяет, требуется ли отправка уведомления для нового статуса

    * Находит токен устройства пользователя в БД

    * Формирует контент пуш‑уведомления

    * Отправляет запрос в сервис пуш‑уведомлений (FCM/APNs)

4. Сервис пуш‑уведомлений (FCM/APNs) отправляет уведомление в мобильное приложение

5. Логирование всех этапов процесса

## Функциональные требования

1. Система должна получать данные о статусе заказ из внешнего API
2. Поддерживать два механизма получения данных:
    * вебхуки (основной)
    * периодический опрос API (резервный)
3. Сохранять актуальный статус заказа в БД
4. Для каждого изменения статуса проверять, требуется ли отправка пуш‑уведомления (согласно таблице статусов).
5. Сформировать контент уведомления
6. Отправить push-уведомление через сервис уведомлений APNs(IOS)/FCM(Android)
7. Регистрировать все события в логах


## Нефункциональные требования 

1. Доступность системы — N % времени
2. Время отправки пуш‑уведомления после изменения статуса — не позднее N секунд
3. Время обработки обновления статуса заказа — не более N секунд
4. Надежность доставки уведомлений
5. Поддержка масштабирования: система должна выдерживать рост числа заказов и пользователей без существенного снижения производительности
6. Безопасность: обмен данными с внешним сервисом должен осуществляться по защищённому соединению (HTTPS), доступ к API — через токен аутентификации
7. Понятность уведомлений: тексты пуш‑уведомлений должны быть краткими, понятными и локализованными




